<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FALAAI - Rede Social Escolar</title>
<style>
  /* Estilos básicos, responsivos e limpos */
  body {
    margin:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #1a1a1a; color: #eee;
    display:flex; flex-direction: column; min-height: 100vh;
  }
  header {
    background: #282828; padding: 15px 20px;
    display:flex; justify-content: space-between; align-items:center;
  }
  header h1 { font-weight: 700; letter-spacing: 2px; font-size: 1.6em; }
  main { flex-grow: 1; display: flex; gap: 15px; padding: 15px; }
  aside, section {
    background: #222; border-radius: 8px; padding: 15px;
    box-shadow: 0 0 10px #111;
  }
  aside {
    flex-basis: 250px;
    display: flex; flex-direction: column;
  }
  section {
    flex-grow: 1;
    display: flex; flex-direction: column;
  }
  button, input[type=text], textarea {
    font-size: 1em; padding: 8px; border-radius: 5px; border:none;
  }
  button {
    background: #4caf50; color: white; cursor: pointer; transition: 0.3s;
  }
  button:hover {
    background: #45a049;
  }
  .btn-secondary {
    background: #555;
  }
  .btn-secondary:hover {
    background: #666;
  }
  .post, .comment, .message {
    background: #333; margin-bottom: 12px; padding: 10px; border-radius: 6px;
  }
  .post .author, .comment .author, .message .author {
    font-weight: 700; margin-bottom: 6px; color: #8ec07c;
  }
  .post .content, .comment .content, .message .content {
    white-space: pre-wrap;
  }
  .post .actions, .comment .actions {
    margin-top: 8px;
  }
  .post .actions button, .comment .actions button {
    margin-right: 10px;
  }
  .comments-section {
    margin-top: 10px;
    padding-left: 15px;
    border-left: 2px solid #555;
  }
  nav button {
    margin-right: 10px;
  }
  .profile-section, .messages-section, .chat-section {
    display: none;
    flex-direction: column;
    height: 100%;
    overflow-y: auto;
  }
  .active {
    display: flex !important;
  }
  .message-input, .post-input, .comment-input {
    width: 100%;
    margin-top: 8px;
  }
  .message-list, .post-list, .comment-list, .chat-messages {
    flex-grow: 1;
    overflow-y: auto;
  }
  .user-list {
    margin-top: 10px;
    max-height: 200px;
    overflow-y: auto;
  }
  .user-list button {
    width: 100%;
    margin-bottom: 6px;
    background: #3a3a3a;
    border-radius: 5px;
  }
  .user-list button:hover {
    background: #4a4a4a;
  }
  .chat-header {
    font-weight: 700;
    margin-bottom: 10px;
    color: #d3869b;
  }
  textarea {
    resize: vertical;
  }
</style>
</head>
<body>

<header>
  <h1>FALAAI</h1>
  <nav>
    <button id="navFeed">Feed</button>
    <button id="navProfile">Perfil</button>
    <button id="navMessages">Mensagens</button>
    <button id="navChat">Chat Temas</button>
  </nav>
  <button id="btnLogout" class="btn-secondary">Sair</button>
</header>

<main>
  <!-- Sidebar usuários para seguir -->
  <aside>
    <h2>Usuários</h2>
    <div id="userList" class="user-list">
      <!-- Lista de usuários será carregada aqui -->
    </div>
  </aside>

  <!-- Feed de postagens -->
  <section id="feedSection" class="active">
    <h2>Feed</h2>
    <textarea id="newPostInput" class="post-input" rows="3" placeholder="O que você quer compartilhar?"></textarea>
    <button id="btnPost">Postar</button>
    <div id="postList" class="post-list" style="margin-top: 15px;"></div>
  </section>

  <!-- Perfil do usuário -->
  <section id="profileSection" class="profile-section">
    <h2>Perfil de <span id="profileName"></span></h2>
    <p><strong>Seguindo:</strong> <span id="followingCount">0</span></p>
    <p><strong>Seguidores:</strong> <span id="followersCount">0</span></p>

    <h3>Posts</h3>
    <div id="profilePosts"></div>

    <h3>Curtidas</h3>
    <div id="profileLikes"></div>

    <h3>Comentários</h3>
    <div id="profileComments"></div>
  </section>

  <!-- Mensagens privadas -->
  <section id="messagesSection" class="messages-section">
    <h2>Mensagens</h2>
    <div id="messageUsers" class="user-list" style="max-height: 150px;"></div>
    <div id="messageConversation" style="flex-grow:1; overflow-y:auto; background:#222; border-radius:6px; padding:10px; margin: 10px 0;"></div>
    <textarea id="messageInput" class="message-input" rows="3" placeholder="Digite sua mensagem..."></textarea>
    <button id="btnSendMessage">Enviar</button>
  </section>

  <!-- Chat por temas -->
  <section id="chatSection" class="chat-section">
    <h2>Chat por Temas</h2>
    <select id="chatTopicSelect" style="margin-bottom:10px; padding:6px; border-radius:5px; border:none; width: 100%;">
      <option value="cultura">Cultura Pop</option>
      <option value="esportes">Esportes</option>
      <option value="musica">Música</option>
      <option value="games">Games</option>
    </select>
    <div id="chatMessages" class="chat-messages" style="flex-grow:1; overflow-y:auto; background:#222; border-radius:6px; padding:10px;"></div>
    <textarea id="chatInput" class="message-input" rows="3" placeholder="Digite sua mensagem no chat..."></textarea>
    <button id="btnSendChat">Enviar no Chat</button>
  </section>
</main>

<script>
  // Simples sistema local para múltiplos usuários
  let users = JSON.parse(localStorage.getItem('users')) || [
    {username:'saintex', password:'ffg..1.', name:'SaintEx', followers:[], following:[], posts:[], likes:[], comments:[], messages:{}, chats:{}},
    {username:'alice', password:'123', name:'Alice', followers:[], following:[], posts:[], likes:[], comments:[], messages:{}, chats:{}},
    {username:'bob', password:'123', name:'Bob', followers:[], following:[], posts:[], likes:[], comments:[], messages:{}, chats:{}}
  ];
  let loggedUser = JSON.parse(sessionStorage.getItem('loggedUser')) || null;

  if(!loggedUser) {
    // Se não está logado, redireciona para tela de login simples
    window.location.href = 'login.html';
  }

  // Variáveis elementos
  const userList = document.getElementById('userList');
  const postList = document.getElementById('postList');
  const newPostInput = document.getElementById('newPostInput');
  const btnPost = document.getElementById('btnPost');
  const profileSection = document.getElementById('profileSection');
  const feedSection = document.getElementById('feedSection');
  const profileName = document.getElementById('profileName');
  const profilePosts = document.getElementById('profilePosts');
  const profileLikes = document.getElementById('profileLikes');
  const profileComments = document.getElementById('profileComments');
  const followingCount = document.getElementById('followingCount');
  const followersCount = document.getElementById('followersCount');
  const navFeed = document.getElementById('navFeed');
  const navProfile = document.getElementById('navProfile');
  const navMessages = document.getElementById('navMessages');
  const navChat = document.getElementById('navChat');
  const btnLogout = document.getElementById('btnLogout');
  const messagesSection = document.getElementById('messagesSection');
  const messagesUsers = document.getElementById('messageUsers');
  const messageConversation = document.getElementById('messageConversation');
  const messageInput = document.getElementById('messageInput');
  const btnSendMessage = document.getElementById('btnSendMessage');
  const chatSection = document.getElementById('chatSection');
  const chatTopicSelect = document.getElementById('chatTopicSelect');
  const chatMessages = document.getElementById('chatMessages');
  const chatInput = document.getElementById('chatInput');
  const btnSendChat = document.getElementById('btnSendChat');

  let currentChatUser = null;
  let currentChatTopic = chatTopicSelect.value;

  // Salva usuários no localStorage
  function saveUsers() {
    localStorage.setItem('users', JSON.stringify(users));
  }

  // Salva sessão
  function saveSession() {
    sessionStorage.setItem('loggedUser', JSON.stringify(loggedUser));
  }

  // Atualiza lista de usuários no sidebar (exceto o próprio)
  function updateUserList() {
    userList.innerHTML = '';
    users.forEach(u => {
      if(u.username !== loggedUser.username) {
        const btn = document.createElement('button');
        btn.textContent = `${u.name} (@${u.username})`;
        btn.onclick = () => toggleFollow(u.username);
        if(loggedUser.following.includes(u.username)) {
          btn.textContent += ' - Seguindo';
          btn.style.background = '#3a6e3a';
        }
        userList.appendChild(btn);
      }
    });
  }

  // Toggle seguir / deixar de seguir
  function toggleFollow(username) {
    if(loggedUser.following.includes(username)) {
      loggedUser.following = loggedUser.following.filter(f => f !== username);
      const other = users.find(u => u.username === username);
      other.followers = other.followers.filter(f => f !== loggedUser.username);
    } else {
      loggedUser.following.push(username);
      const other = users.find(u => u.username === username);
      other.followers.push(loggedUser.username);
    }
    saveUsers();
    saveSession();
    updateUserList();
    if(profileSection.classList.contains('active')) {
      loadProfile(loggedUser.username);
    }
  }

  // Cria um post
  function createPost() {
    const text = newPostInput.value.trim();
    if(text.length === 0) return alert('Escreva algo antes de postar.');
    const post = {
      id: Date.now(),
      author: loggedUser.username,
      content: text,
      likes: [],
      comments: []
    };
    loggedUser.posts.unshift(post);
    saveUsers();
    saveSession();
    newPostInput.value = '';
    renderFeed();
    if(profileSection.classList.contains('active')) loadProfile(loggedUser.username);
  }

  // Renderiza o feed (posts dos usuários que sigo + meus)
  function renderFeed() {
    const feedPosts = [];
    // Posts do próprio usuário
    feedPosts.push(...loggedUser.posts.map(p => ({...p, authorName: loggedUser.name})));
    // Posts dos que sigo
    loggedUser.following.forEach(followedUsername => {
      const user = users.find(u => u.username === followedUsername);
      if(user) {
        feedPosts.push(...user.posts.map(p => ({...p, authorName: user.name})));
      }
    });
    // Ordena pelo mais recente
    feedPosts.sort((a,b) => b.id - a.id);

    postList.innerHTML = '';
    feedPosts.forEach(post => {
      const div = document.createElement('div');
      div.className = 'post';
      div.innerHTML = `
        <div class="author">${post.authorName} (@${post.author})</div>
        <div class="content">${escapeHtml(post.content)}</div>
        <div class="actions">
          <button>${post.likes.includes(loggedUser.username) ? 'Descurtir' : 'Curtir'} (${post.likes.length})</button>
          <button>Comentários (${post.comments.length})</button>
        </div>
        <div class="comments-section" style="display:none;"></div>
      `;

      const likeBtn = div.querySelector('button:first-child');
      const commentBtn = div.querySelector('button:nth-child(2)');

      likeBtn.onclick = () => toggleLikePost(post);
      commentBtn.onclick = () => toggleCommentsSection(div, post);

      postList.appendChild(div);
    });
  }

  // Função para escapar HTML e evitar XSS
  function escapeHtml(text) {
    return text.replace(/[&<>"']/g, m => ({
      '&':'&amp;', '<':'&lt;', '>':'&gt;', '"':'&quot;', "'":'&#39;'
    })[m]);
  }

  // Curtir / descurtir post
  function toggleLikePost(post) {
    if(post.likes.includes(loggedUser.username)) {
      post.likes = post.likes.filter(u => u !== loggedUser.username);
      // Remover curtida do usuário original
      const author = users.find(u => u.username === post.author);
      if(author) {
        const userPost = author.posts.find(p => p.id === post.id);
        if(userPost) userPost.likes = post.likes;
      }
      // Remove da lista de likes do usuário logado
      loggedUser.likes = loggedUser.likes.filter(l => l.postId !== post.id);
    } else {
      post.likes.push(loggedUser.username);
      // Adiciona curtida no post original do autor
      const author = users.find(u => u.username === post.author);
      if(author) {
        const userPost = author.posts.find(p => p.id === post.id);
        if(userPost) userPost.likes = post.likes;
      }
      loggedUser.likes.push({postId: post.id, author: post.author});
    }
    saveUsers();
    saveSession();
    renderFeed();
    if(profileSection.classList.contains('active')) loadProfile(loggedUser.username);
  }

  // Exibe/esconde seção de comentários
  function toggleCommentsSection(postDiv, post) {
    const commentsSection = postDiv.querySelector('.comments-section');
    if(commentsSection.style.display === 'none') {
      renderComments(commentsSection, post);
      commentsSection.style.display = 'block';
    } else {
      commentsSection.style.display = 'none';
    }
  }

  // Renderiza comentários de um post com opção de responder e adicionar comentário
  function renderComments(container, post) {
    container.innerHTML = '';
    // Lista de comentários
    const list = document.createElement('div');
    list.className = 'comment-list';

    post.comments.forEach(comment => {
      const div = document.createElement('div');
      div.className = 'comment';
      const authorUser = users.find(u => u.username === comment.author);
      div.innerHTML = `
        <div class="author">${authorUser ? authorUser.name : comment.author} (@${comment.author})</div>
        <div class="content">${escapeHtml(comment.content)}</div>
        <div class="actions">
          <button>${comment.likes && comment.likes.includes(loggedUser.username) ? 'Descurtir' : 'Curtir'} (${(comment.likes || []).length})</button>
          <button>Responder</button>
        </div>
        <div class="comments-section reply-section" style="margin-left: 15px;"></div>
      `;

      // Curtir comentário
      const likeBtn = div.querySelector('button:first-child');
      likeBtn.onclick = () => {
        comment.likes = comment.likes || [];
        if(comment.likes.includes(loggedUser.username)) {
          comment.likes = comment.likes.filter(u => u !== loggedUser.username);
        } else {
          comment.likes.push(loggedUser.username);
        }
        saveUsers();
        saveSession();
        renderComments(container, post);
        if(profileSection.classList.contains('active')) loadProfile(loggedUser.username);
      };

      // Responder comentário
      const replyBtn = div.querySelector('button:nth-child(2)');
      replyBtn.onclick = () => {
        const replySection = div.querySelector('.reply-section');
        if(replySection.innerHTML.trim() === '') {
          const textarea = document.createElement('textarea');
          textarea.rows = 2;
          textarea.placeholder = 'Responder...';
          const btnSend = document.createElement('button');
          btnSend.textContent = 'Enviar Resposta';
          btnSend.onclick = () => {
            const text = textarea.value.trim();
            if(text.length === 0) return alert('Escreva algo para responder.');
            comment.replies = comment.replies || [];
            comment.replies.push({
              id: Date.now(),
              author: loggedUser.username,
              content: text,
              likes: []
            });
            saveUsers();
            saveSession();
            renderComments(container,
<script>
  // Escapa texto para evitar XSS
  function escapeHtml(text) {
    const div = document.createElement('div');
    div.appendChild(document.createTextNode(text));
    return div.innerHTML;
  }

  // Toggle curtir/descurtir post
  function toggleLikePost(post) {
    const author = users.find(u => u.username === post.author);
    if (!author) return;

    const postInAuthor = author.posts.find(p => p.id === post.id);
    if (!postInAuthor) return;

    if (postInAuthor.likes.includes(loggedUser.username)) {
      postInAuthor.likes = postInAuthor.likes.filter(u => u !== loggedUser.username);
    } else {
      postInAuthor.likes.push(loggedUser.username);
    }
    saveUsers();
    saveSession();
    renderFeed();
    if(profileSection.classList.contains('active')) loadProfile(loggedUser.username);
  }

  // Toggle seção de comentários
  function toggleCommentsSection(postDiv, post) {
    const commentsSection = postDiv.querySelector('.comments-section');
    if (commentsSection.style.display === 'none' || commentsSection.style.display === '') {
      renderComments(commentsSection, post);
      commentsSection.style.display = 'block';
    } else {
      commentsSection.style.display = 'none';
    }
  }

  // Renderiza comentários
  function renderComments(container, post) {
    container.innerHTML = '';

    // Lista de comentários
    post.comments.forEach(comment => {
      const commentDiv = document.createElement('div');
      commentDiv.className = 'comment';
      const authorUser = users.find(u => u.username === comment.author);
      const authorName = authorUser ? authorUser.name : comment.author;
      commentDiv.innerHTML = `
        <div class="author">${authorName} (@${comment.author})</div>
        <div class="content">${escapeHtml(comment.content)}</div>
        <div class="actions">
          <button class="btn-like-comment">${comment.likes && comment.likes.includes(loggedUser.username) ? 'Descurtir' : 'Curtir'} (${comment.likes ? comment.likes.length : 0})</button>
        </div>
      `;
      // Inicializa likes array se não existir
      if (!comment.likes) comment.likes = [];

      // Evento curtir comentário
      commentDiv.querySelector('.btn-like-comment').onclick = () => {
        if (comment.likes.includes(loggedUser.username)) {
          comment.likes = comment.likes.filter(u => u !== loggedUser.username);
        } else {
          comment.likes.push(loggedUser.username);
        }
        saveUsers();
        saveSession();
        renderFeed();
        if(profileSection.classList.contains('active')) loadProfile(loggedUser.username);
        renderComments(container, post);
      };

      container.appendChild(commentDiv);
    });

    // Input para novo comentário
    const commentInput = document.createElement('textarea');
    commentInput.className = 'comment-input';
    commentInput.rows = 2;
    commentInput.placeholder = 'Escreva um comentário...';

    const sendCommentBtn = document.createElement('button');
    sendCommentBtn.textContent = 'Comentar';
    sendCommentBtn.onclick = () => {
      const text = commentInput.value.trim();
      if(text.length === 0) return alert('Escreva algo antes de comentar.');
      post.comments.push({id: Date.now(), author: loggedUser.username, content: text, likes: []});
      saveUsers();
      saveSession();
      renderFeed();
      if(profileSection.classList.contains('active')) loadProfile(loggedUser.username);
      renderComments(container, post);
      commentInput.value = '';
    };

    container.appendChild(commentInput);
    container.appendChild(sendCommentBtn);
  }

  // Carrega dados do perfil do usuário
  function loadProfile(username) {
    const user = users.find(u => u.username === username);
    if(!user) return alert('Usuário não encontrado.');

    profileName.textContent = user.name;
    followingCount.textContent = user.following.length;
    followersCount.textContent = user.followers.length;

    // Posts do usuário
    profilePosts.innerHTML = '';
    user.posts.forEach(post => {
      const div = document.createElement('div');
      div.className = 'post';
      div.innerHTML = `
        <div class="content">${escapeHtml(post.content)}</div>
        <div>Likes: ${post.likes.length} | Comentários: ${post.comments.length}</div>
      `;
      profilePosts.appendChild(div);
    });

    // Curtidas do usuário (posts que ele curtiu)
    profileLikes.innerHTML = '';
    users.forEach(u => {
      u.posts.forEach(p => {
        if(p.likes.includes(user.username)) {
          const div = document.createElement('div');
          div.className = 'post';
          div.innerHTML = `<div><strong>${u.name}</strong>: ${escapeHtml(p.content)}</div>`;
          profileLikes.appendChild(div);
        }
      });
    });

    // Comentários do usuário
    profileComments.innerHTML = '';
    users.forEach(u => {
      u.posts.forEach(p => {
        p.comments.forEach(c => {
          if(c.author === user.username) {
            const div = document.createElement('div');
            div.className = 'comment';
            div.innerHTML = `<div><strong>${u.name}</strong> (no post): ${escapeHtml(c.content)}</div>`;
            profileComments.appendChild(div);
          }
        });
      });
    });
  }

  // Navegação entre seções
  navFeed.onclick = () => {
    showSection('feed');
    renderFeed();
  };
  navProfile.onclick = () => {
    showSection('profile');
    loadProfile(loggedUser.username);
  };
  navMessages.onclick = () => {
    showSection('messages');
    loadMessageUsers();
  };
  navChat.onclick = () => {
    showSection('chat');
    loadChatMessages(currentChatTopic);
  };

  btnLogout.onclick = () => {
    sessionStorage.removeItem('loggedUser');
    window.location.href = 'login.html';
  };

  function showSection(name) {
    feedSection.classList.remove('active');
    profileSection.classList.remove('active');
    messagesSection.classList.remove('active');
    chatSection.classList.remove('active');

    if(name === 'feed') feedSection.classList.add('active');
    else if(name === 'profile') profileSection.classList.add('active');
    else if(name === 'messages') messagesSection.classList.add('active');
    else if(name === 'chat') chatSection.classList.add('active');
  }

  btnPost.onclick = createPost;

  // Mensagens privadas

  function loadMessageUsers() {
    messagesUsers.innerHTML = '';
    users.forEach(u => {
      if(u.username !== loggedUser.username) {
        const btn = document.createElement('button');
        btn.textContent = u.name + ' (@' + u.username + ')';
        btn.onclick = () => openConversation(u.username);
        messagesUsers.appendChild(btn);
      }
    });
    messageConversation.innerHTML = '<p>Selecione um usuário para conversar.</p>';
    currentChatUser = null;
  }

  function openConversation(username) {
    currentChatUser = username;
    renderConversation();
  }

  function renderConversation() {
    if(!currentChatUser) return;
    const other = users.find(u => u.username === currentChatUser);
    if(!other) return;
    messageConversation.innerHTML = '';
    // Mensagens do loggedUser com other
    const conv = loggedUser.messages[currentChatUser] || [];
    conv.forEach(msg => {
      const div = document.createElement('div');
      div.className = 'message';
      div.innerHTML = `<div class="author">${msg.from === loggedUser.username ? 'Você' : other.name}</div><div class="content">${escapeHtml(msg.text)}</div>`;
      messageConversation.appendChild(div);
    });
    messageConversation.scrollTop = messageConversation.scrollHeight;
  }

  btnSendMessage.onclick = () => {
    if(!currentChatUser) return alert('Selecione um usuário para enviar mensagem.');
    const text = messageInput.value.trim();
    if(text.length === 0) return alert('Digite uma mensagem.');
    // Adiciona mensagem no loggedUser
    if(!loggedUser.messages[currentChatUser]) loggedUser.messages[currentChatUser] = [];
    loggedUser.messages[currentChatUser].push({from: loggedUser.username, text});
    // Adiciona mensagem no other
    const other = users.find(u => u.username === currentChatUser);
    if(!other.messages[loggedUser.username]) other.messages[loggedUser.username] = [];
    other.messages[loggedUser.username].push({from: loggedUser.username, text});

    saveUsers();
    saveSession();
    messageInput.value = '';
    renderConversation();
  };

  // Chat por temas

  chatTopicSelect.onchange = () => {
    currentChatTopic = chatTopicSelect.value;
    loadChatMessages(currentChatTopic);
  };

  function loadChatMessages(topic) {
    chatMessages.innerHTML = '';
    if(!loggedUser.chats[topic]) loggedUser.chats[topic] = [];
    loggedUser.chats[topic].forEach(msg => {
      const div = document.createElement('div');
      div.className = 'message';
      const authorUser = users.find(u => u.username === msg.from);
            const authorName = authorUser ? authorUser.name : msg.from;
      div.innerHTML = `<div class="author">${authorName}</div><div class="content">${escapeHtml(msg.text)}</div>`;
      chatMessages.appendChild(div);
    });
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  btnSendChatMessage.onclick = () => {
    const text = chatInput.value.trim();
    if (text.length === 0) return alert('Digite uma mensagem para enviar.');
    if (!loggedUser.chats[currentChatTopic]) loggedUser.chats[currentChatTopic] = [];
    // Adiciona mensagem no chat do tema para o usuário atual
    loggedUser.chats[currentChatTopic].push({ from: loggedUser.username, text });
    // Para simplicidade, adiciona para todos os usuários (simulando chat público por tema)
    users.forEach(u => {
      if (u.username !== loggedUser.username) {
        if (!u.chats[currentChatTopic]) u.chats[currentChatTopic] = [];
        u.chats[currentChatTopic].push({ from: loggedUser.username, text });
      }
    });
    saveUsers();
    saveSession();
    chatInput.value = '';
    loadChatMessages(currentChatTopic);
  };

  // Inicialização ao carregar a página

  function init() {
    // Define usuário logado na sessão
    const sessionUser = JSON.parse(sessionStorage.getItem('loggedUser'));
    if (!sessionUser) {
      alert('Sessão expirada. Faça login novamente.');
      window.location.href = 'login.html';
      return;
    }
    // Atualiza loggedUser com dados completos do users
    loggedUser = users.find(u => u.username === sessionUser.username);
    if (!loggedUser) {
      alert('Usuário não encontrado. Faça login novamente.');
      window.location.href = 'login.html';
      return;
    }
    // Prepara select de temas do chat
    chatTopicSelect.innerHTML = '';
    chatTopics.forEach(topic => {
      const opt = document.createElement('option');
      opt.value = topic;
      opt.textContent = topic.charAt(0).toUpperCase() + topic.slice(1);
      chatTopicSelect.appendChild(opt);
    });
    currentChatTopic = chatTopics[0];
    chatTopicSelect.value = currentChatTopic;

    // Mostra feed por padrão
    showSection('feed');
    renderFeed();
  }

  // Executa a inicialização
  init();

</script>


